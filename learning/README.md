# 范文学习系统

> 通过拆解用户提供的范文，学习文章结构、排版、文风、语气，生成可复用的风格文件。

## 工作流程

```
用户上传范文 → 类型自动识别 → 8维深度拆解 → 核心观点与金句提取 → 生成风格文件 → 人格消化 → 后续创作时调用
```

> **新增**：拆解完成后，自动执行「核心观点与金句提取」，将内容存入记忆库（详见第六节）。

---

## 零、文章类型自动识别（拆解前必须先完成）

收到范文后，**第一件事**是判断文章类型。不是凭感觉，而是用以下特征指纹体系进行评分判定。

### 五种类型的特征指纹

#### 干货型特征指纹

| 维度 | 核心特征 |
|------|---------|
| **结构** | 有明确的步骤/方法/要点编号；总-分-总结构；每个章节有可操作的行动指引 |
| **内容** | 提供具体方法论、工具推荐、操作步骤；解决「怎么做」的问题 |
| **语言** | 祈使句多（「你可以」「建议」「第一步」）；逻辑连接词密集（「因此」「所以」「具体来说」） |
| **信号词** | 方法、技巧、步骤、教程、攻略、指南、实操、避坑、提升、效率、工具 |
| **读者获得** | 读完能立刻照着做的具体方法 |

#### 故事型特征指纹

| 维度 | 核心特征 |
|------|---------|
| **结构** | 有时间线；有人物；有情节起伏（起因→经过→转折→结局）；叙事弧完整 |
| **内容** | 具体场景描写、对话还原、情感表达、五感细节刻画 |
| **语言** | 叙事视角（「那天」「他说」「我记得」）；过去时态为主；画面感强的描写句 |
| **信号词** | 那年、后来、突然、他/她、回忆、经历、当时、转折、没想到、从那以后 |
| **读者获得** | 情感共鸣、代入感、从别人的故事中看到自己 |

#### 观点型特征指纹

| 维度 | 核心特征 |
|------|---------|
| **结构** | 论点→论据→论证；先破后立；有明确的立场表态；正反两面分析 |
| **内容** | 对某个现象/话题发表看法；有推理、引用、反驳；解决「怎么看」的问题 |
| **语言** | 判断句多（「我认为」「本质上」「实际上」）；反问句多；因果推理链条 |
| **信号词** | 本质、根本原因、我认为、真相是、不同意、应该、实际上、背后、深层 |
| **读者获得** | 一个新的看问题的视角、被说服或被启发 |

#### 清单型特征指纹

| 维度 | 核心特征 |
|------|---------|
| **结构** | 并列式结构；N 个条目；每项有独立标题和简短介绍；条目间结构高度相似 |
| **内容** | 盘点、推荐、合集；每项有评价/理由/亮点描述，不是简单罗列 |
| **语言** | 条目化表达；每项结构模板化（名称→推荐理由→亮点→适用场景） |
| **信号词** | 推荐、盘点、合集、Top N、最值得、必备、收藏、好用、亲测 |
| **读者获得** | 一份经过筛选的清单，省去自己挑选的时间 |

#### 热点型特征指纹

| 维度 | 核心特征 |
|------|---------|
| **结构** | 事件回顾→多方声音→深度分析→启示/观点；有明确的时效性 |
| **内容** | 与近期热点事件紧密相关；引用多方信息源；提供独特解读角度 |
| **语言** | 新闻报道式 + 评论式混合；事实陈述和观点表达交替；紧迫感用词 |
| **信号词** | 最近、刚刚、热搜、事件、回应、官方、争议、刷屏、全网、真相 |
| **读者获得** | 快速了解事件全貌 + 获得一个独到的分析视角 |

### 评分矩阵

对范文的每种类型特征进行 0-10 分评分：

```
类型评分表：

              干货型  故事型  观点型  清单型  热点型
结构匹配度     ?/10   ?/10   ?/10   ?/10   ?/10
内容匹配度     ?/10   ?/10   ?/10   ?/10   ?/10
语言匹配度     ?/10   ?/10   ?/10   ?/10   ?/10
信号词密度     ?/10   ?/10   ?/10   ?/10   ?/10
─────────────────────────────────────────────────
总分            ?      ?      ?      ?      ?

主类型：[得分最高的类型]
副类型：[得分第二的类型，如果 ≥6 分]
混合比例：[主类型]70% + [副类型]30%
```

### 判定规则

1. **单一类型**：最高分 ≥7 且领先第二名 ≥3 分 → 标记为单一类型
2. **混合类型**：最高分和第二名差距 <3 分 → 标记为混合类型，按比例标注
3. **模糊类型**：所有类型分数都 <6 → 标记为「非典型」，重点学习文风而非归类
4. 副类型得分 <4 的不标注

### 判定流程

```
第一步：快判（30秒）
  ├─ 扫描标题 → 有数字+方法词 → 倾向干货
  ├─ 扫描结构 → 并列N条 → 倾向清单
  ├─ 扫描开头 → 有时间地点人物 → 倾向故事
  ├─ 扫描语气 → 有「我认为」「本质上」 → 倾向观点
  └─ 扫描时效 → 涉及近期事件 → 倾向热点

第二步：细判（评分矩阵打分）
  └─ 按4个维度逐项打分，得出精确分类

第三步：输出判定结果
  ├─ 主类型 + 副类型（如有）
  ├─ 混合比例
  ├─ 判定依据（列出3个最关键的特征证据）
  └─ 置信度（高/中/低）
```

### 判定结果输出格式

```
📋 文章类型识别结果

主类型：干货型（8.5/10）
副类型：故事型（6.0/10）
混合比例：干货 70% + 故事 30%
置信度：高

判定依据：
1. 结构上有明确的 3 个方法步骤，每步都有可操作的指引（干货特征）
2. 开头用了一个个人经历场景切入（故事特征）
3. 全文信号词「方法」出现 5 次、「步骤」出现 3 次（干货信号词密集）
```

---

## 一、拆解分析框架（8 维度）

类型识别完成后，按以下 8 个维度进行深度拆解（在原 7 维度基础上新增「类型特征」维度）：

### 0. 类型特征（新增）
- 识别出的主类型和副类型
- 该文章与标准模板的吻合度
- 与标准模板的差异点（这些差异往往是作者的独特之处）
- 如果是混合类型，各类型元素如何融合的

### 1. 结构分析
- 文章总字数、段落数、小标题数
- 开头方式（场景/痛点/数据/悬念/对话）
- 正文展开方式（并列/递进/对比/时间线）
- 结尾方式（总结/金句/互动/开放式）
- 章节比例（开头/正文/结尾各占百分比）

### 2. 排版分析
- 段落平均长度（字数/行数）
- 小标题频率（每隔多少字一个）
- 列表使用频率和方式
- 引用块使用方式
- 加粗使用频率和策略
- 分隔线使用位置
- emoji 使用频率和类型

### 3. 语气分析
- 整体语气（正式/口语/幽默/严肃/温暖/犀利）
- 人称使用（我/你/我们/大家）
- 口语化程度（1-10 分）
- 情绪基调（积极/中性/批判/激励）
- 特征语气词（如：「说到底」「你想想看」）

### 4. 文风分析
- 句子平均长度
- 长短句比例和节奏
- 修辞手法（类比/对比/排比/反问/夸张）
- 是否使用对话
- 专业术语密度
- 网络用语使用情况

### 5. 金句分析
- 金句数量和位置
- 金句类型（对比式/反转式/定义式/条件式）
- 金句的密度（全文占比）
- **金句风格标签**（犀利/温暖/幽默/哲理/朴实/激励/反讽）
- **金句句式结构**（提炼可复用的句式模式）

### 6. 论证方式
- 观点展开方式（先观点后案例/先案例后观点）
- 证据类型（数据/故事/逻辑推理/类比/权威引用）
- 反驳处理（是否承认对立观点）

### 7. 读者互动
- 互动引导方式
- 互动频率（只在结尾/穿插正文）
- 互动语气（正式/随意/趣味）

---

## 二、风格文件生成规范

分析完成后，自动生成一个风格文件存入 `styles/` 目录。

### 文件命名
```
styles/[风格名称].md
```
用户可以自定义风格名称，也可以由系统根据文风特征自动命名。

### 文件结构
```markdown
# 风格档案：[风格名称]

## 来源
- 范文标题：《XXX》
- 分析日期：YYYY-MM-DD
- 范文字数：XXXX 字
- 文章类型：[主类型] + [副类型]（混合比例）
- 类型置信度：高/中/低

## 风格概要
[一句话概括这种风格的特点]

## 结构模式
[描述这种风格的文章结构特征]

## 排版规则
[描述具体的排版规范]

## 语气特征
[描述语气和表达方式]

## 文风要素
[描述句式、修辞、节奏等特征]

## 金句模式
[描述金句的风格和使用方式]

## 禁忌事项
[这种风格应该避免的做法]

## 示例片段
[从范文中摘取最能体现该风格的 2-3 个片段]
```

---

## 三、核心观点与金句提取（拆解后自动执行）

> 每次范文拆解完成后，自动执行以下提取流程，将有价值的内容存入记忆库。
> 这一步确保范文学习不仅产出风格文件，还沉淀可复用的观点和金句资产。

### 3.1 核心观点提取

从范文中提取 3-5 个核心观点：

```
提取规则：
1. 识别文章的主论点（作者最想表达的 1 个核心观点）
2. 识别支撑论点（支撑主论点的 2-4 个分论点）
3. 识别隐含价值判断（作者没有直说但暗含的态度和立场）
4. 每个观点用 1-2 句话概括
```

**存储规则**：
- 存入 → `memory/viewpoints.md`
- 立场强度：默认标记为「中立引用」（因为是范文，不是用户自己的观点）
- 如果用户在对话中对某个观点表态 → 更新立场强度
- 标注来源为范文标题和风格名称

### 3.2 金句提取与入库

从范文中提取所有精彩金句：

```
提取规则：
1. 识别所有具有传播力的句子（能独立成立、有记忆点）
2. 为每条金句标注风格标签（犀利/温暖/幽默/哲理/朴实/激励/反讽）
3. 为每条金句标注句式类型（对比式/反转式/定义式/条件式/排比式/类比式/反问式）
4. 分析金句的句式结构，提炼可复用的模式
```

**存储规则**：
- 范文中的金句 → 存入 `memory/materials.md` 第三节（金句观点），标注风格标签
- 金句的句式模式 → 存入 `memory/golden-sentences.md` 的「风格句式模式库」对应分区
- 如果同风格金句积累 ≥5 条 → 自动提炼该风格的句式模式

### 3.3 提取结果输出格式

```
📝 内容提取结果

核心观点（已存入 viewpoints.md）：
1. [V-XXX] [观点内容] —— 立场：中立引用
2. [V-XXX] [观点内容] —— 立场：中立引用
...

金句提取（已存入 materials.md）：
1. 「金句内容」 —— 风格：犀利 | 句式：对比式
2. 「金句内容」 —— 风格：温暖 | 句式：定义式
...

句式模式更新：
- [风格]风格新增句式模式：[模式描述]
```

---

## 四、调用方式

创作时调用已学习的风格：

```
/wechat-writer 干货 [主题] --style [风格名称]
```

或在对话中说：
- 「用 [风格名称] 的风格来写」
- 「模仿之前那篇 [范文标题] 的风格」
- 「参考 [风格名称] 的语气」

---

## 五、学习指令

| 指令 | 作用 |
|------|------|
| `学习这篇文章` | 对提供的范文进行完整拆解分析 |
| `只学结构` | 只分析文章结构，不分析文风 |
| `只学文风` | 只分析文风语气，不分析结构 |
| `对比风格` | 对比两种已学习的风格差异 |
| `列出所有风格` | 展示已学习的所有风格文件 |
| `删除风格 [名称]` | 删除指定的风格文件 |

---

## 六、范文存放

用户提供的范文原文保存在 `learning/samples/` 目录下：

```
learning/
├── README.md          # 本文件
└── samples/           # 范文原文存放目录
    ├── 范文1.md
    └── 范文2.md
```
